import r from'./../external/@swc/helpers/src/_to_consumable_array.mjs.js';import{generateErrorMessage as o}from"./common.js";import{errorHandler as i}from"./errorHandler.js";import s from"./lodash.js";import{apiResponse as n}from"./response.js";function e(e,t,a,l){var u,c,f=Array.isArray(a)&&a.length>0&&(null===(u=a[0])||void 0===u?void 0:u.success),m=Array.isArray(a)&&a.length>0&&(null===(c=a[0])||void 0===c?void 0:c.fail);try{var d=a;t.length>0&&t.forEach((function(r,s){var t=r.safeParse(a[s]);if(!t.success){var l,u=null===(l=t.error)||void 0===l?void 0:l.issues,c=o(u),f=n.error.badRequest(c);throw f.detail=u,i(f,e)}d.push(t.data)}));var v=l.apply(void 0,r(d));return s.isPromise(v)?new Promise((function(r,o){v.then((function(o){if(!s.isNull(f)&&s.isFunction(f))return f(o);r(v)})).catch((function(r){var n=i(r,e);if(!s.isNull(m)&&s.isFunction(m))return m(n);o(n)}))})):v}catch(r){var h,p=Array.isArray(a)&&a.length>0&&(null===(h=a[0])||void 0===h?void 0:h.fail);if(!s.isNull(p)&&s.isFunction(p))return p(r);throw i(r,e)}}export{e as functionHandler};
