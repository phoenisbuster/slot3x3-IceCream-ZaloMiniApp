import e from'./../../../../external/@swc/helpers/src/_assert_this_initialized.mjs.js';import t from'./../../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import r from'./../../../../external/@swc/helpers/src/_class_call_check.mjs.js';import s from'./../../../../external/@swc/helpers/src/_class_private_field_get.mjs.js';import n from'./../../../../external/@swc/helpers/src/_class_private_field_init.mjs.js';import o from'./../../../../external/@swc/helpers/src/_class_private_field_set.mjs.js';import i from'./../../../../external/@swc/helpers/src/_inherits.mjs.js';import a from'./../../../../external/@swc/helpers/src/_sliced_to_array.mjs.js';import c from'./../../../../external/@swc/helpers/src/_create_super.mjs.js';import u from"../../../../utils/lodash.js";import{LocalResourceStorage as l}from"./localStorage.js";import{NativeResourceStorage as m}from"./nativeStorage.js";import{stringToData as f,stringifyData as p}from"../../../../utils/common.js";import{APP_ID as d,ZALO_SUPPORT_STORAGE_VERSION as h}from"../../../../constants.js";import _ from"../../../../appEnv/getEnv.js";import{__generator as v}from'./../../../../external/tslib/tslib.es6.js';var j,w,g,b=function(){function e(){r(this,e)}var s=e.prototype;return s.getDataFromStorage=function(e){var r=this;return t((function(){var t,s;return v(this,(function(n){switch(n.label){case 0:return[4,r.getInstance().get(e)];case 1:return t=n.sent(),s={},t.forEach((function(e,t){s[t]=f(e)})),[2,s]}}))}))()},s.putDataToStorage=function(e){var r=this;return t((function(){var t,s;return v(this,(function(n){switch(n.label){case 0:return t=r.getInstance(),s={},Object.entries(e).forEach((function(e){var t=a(e,2),r=t[0],n=t[1];u.isUndefined(n)||u.isNull(n)||(s[r]=p(n))})),[4,t.set(s)];case 1:return[2,n.sent()]}}))}))()},s.removeDataFromStorage=function(e){var r=this;return t((function(){return v(this,(function(t){switch(t.label){case 0:return[4,r.getInstance().remove(e)];case 1:return[2,t.sent()]}}))}))()},s.clearStorage=function(){var e=this;return t((function(){return v(this,(function(t){switch(t.label){case 0:return[4,e.getInstance().clear()];case 1:return t.sent(),[2]}}))}))()},s.getStorageInfo=function(){var e=this;return t((function(){return v(this,(function(t){switch(t.label){case 0:return[4,e.getInstance().getInfo()];case 1:return[2,t.sent()]}}))}))()},e}(),I=new WeakMap,S=function(t){i(u,t);var a=c(u);function u(t){var s;return r(this,u),s=a.call(this),n(e(s),I,{writable:!0,value:void 0}),o(e(s),I,t),s}return u.prototype.getInstance=function(){return new l(s(this,I))},u}(b),y=new WeakMap,E=function(t){i(u,t);var a=c(u);function u(t){var s;return r(this,u),s=a.call(this),n(e(s),y,{writable:!0,value:void 0}),o(e(s),y,t),s}return u.prototype.getInstance=function(){return new m(s(this,y))},u}(b),k=new S(d),D=(null===(j=_())||void 0===j?void 0:j.zaloVersion)||"",M=(null===(w=_())||void 0===w?void 0:w.platformName)||"unknown";!!u.isString(D)&&parseInt(D,10)>=h[M]&&(null===(g=_())||void 0===g?void 0:g.appEnv.isMp)&&(k=new E(d));var z=k;export{b as StorageCreator,z as default};
