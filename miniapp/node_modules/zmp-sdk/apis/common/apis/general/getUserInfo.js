import e from'./../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import n from"../../token.js";import{APIS as t}from"../../../constants.js";import{__generator as s}from'./../../../external/tslib/tslib.es6.js';var i,r=(i=e((function(i){var r,o;return s(this,(function(a){switch(a.label){case 0:return[4,n.getAccessToken()];case 1:return r=a.sent(),o="id,name,user_id_by_oa,picture,is_sensitive",i&&(o="".concat(o,".type(").concat(i,")")),[4,fetch("".concat(t.GET_USER_INFO,"?fields=").concat(o),{headers:{access_token:r||""}}).then(function(){var n=e((function(e){var n,t,i;return s(this,(function(s){switch(s.label){case 0:return[4,e.json()];case 1:return[2,{id:null==(i=s.sent())?void 0:i.id,name:null==i?void 0:i.name,avatar:null==i||null===(n=i.picture)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.url,idByOA:null==i?void 0:i.user_id_by_oa,isSensitive:null==i?void 0:i.is_sensitive}]}}))}));return function(e){return n.apply(this,arguments)}}())];case 2:return[2,a.sent()]}}))})),function(e){return i.apply(this,arguments)});export{r as default};
