import e from'./../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import r from'./../../../external/@swc/helpers/src/_object_spread.mjs.js';import o from'./../../../external/@swc/helpers/src/_object_spread_props.mjs.js';import{apiResponse as s}from"../../../utils/response.js";import{mpPath as t,MINI_APP_LINK as a,APIS as n}from"../../../constants.js";import{__generator as c}from'./../../../external/tslib/tslib.es6.js';var p,d=(p=e((function(e,p,d,i,m,h){var l,f,u,_,j,w;return c(this,(function(c){switch(c.label){case 0:return l=new URL(location.href),f=new URLSearchParams,u="".concat(l.pathname.replace(t,"")).concat(l.search),h&&(u="/".concat(e).concat("/"===h[0]?"":"/").concat(h)),_=new URL("".concat(a).concat(u)),f.append("title",d),f.append("description",i||""),f.append("thumbnail",m||""),f.append("url",_.href),f.append("accessToken",p||""),j={headers:{"Content-Type":"application/x-www-form-urlencoded"}},[4,fetch(n.CREATE_SHARE_LINK,r({method:"POST",body:f},j))];case 1:return[4,c.sent().json()];case 2:if(!(w=c.sent())||0!==w.err)throw s.error.cannotGetShareInfo();return _.search="".concat(_.search,"&zshareId=").concat(w.data.shareId),[2,o(r({},w.data),{shareableLink:_.href})]}}))})),function(e,r,o,s,t,a){return p.apply(this,arguments)});export{d as default};
